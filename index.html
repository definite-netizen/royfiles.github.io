<!DOCTYPE html>
<html>
<head>
    <title>Incident Archive – 05.03.2024</title>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono&display=swap" rel="stylesheet">
    <style>
        body {
            background-color: #0b0b0b;
            color: #e0e0e0;
            font-family: "IBM Plex Mono", monospace;
            padding: 40px;
            transition: background-color 1.5s ease;
        }
        h1 {
            color: red;
            letter-spacing: 2px;
        }
        a {
            color: #8ab4f8;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .subtle {
            color: #9a9a9a;
            font-size: 0.9em;
        }

        @keyframes flicker {
            0% { opacity: 1; }
            48% { opacity: 1; }
            49% { opacity: 0.35; }
            50% { opacity: 1; }
            100% { opacity: 1; }
        }

        .flicker {
            animation: flicker 7s infinite;
        }

        .unstable {
            background-color: #050505;
        }

        .alert {
            color: #ff4444;
        }
    </style>
</head>
<body id="page">

<h1 id="archiveTitle">INCIDENT ARCHIVE</h1>

<p id="caseID">CASE ID: 050324</p>
<p>STATUS: PARTIALLY DECLASSIFIED</p>
<p>REDACTIONS: ███████████</p>

<p class="subtle flicker" id="timestamp">
    Last Updated: May 3, 2024 – 14:07
</p>

<p class="subtle access" id="access">
    ACCESS LOGGED.
</p>

<hr>

<h2>FILES</h2>

<ul id="fileList">
    <li><a href="initial-report.pdf" target="_blank">FILE 01 – INITIAL REPORT</a></li>
    <li style="margin-left: 15px;"><a href="file-02.pdf" target="_blank">FILE 02 – INTERNAL CORRESPONDENCE (LEAKED COPY)</a></li>
    <li style="margin-left: 15px;"><a href="file-03.html" target="_blank">FILE 03 – PERCEPTION VARIANCE REPORT</a></li>
    <li style="margin-left: 30px;"><a href="file-04.html" target="_blank">FILE 04 – VIDEO RECOVERY LOG</a></li>
    <li style="margin-left: 45px;"><a href="file-05.html" target="_blank">FILE 05 – SITE CORRELATION REPORT</a></li>
    <li style="margin-left: 60px;"><a href="file-06.html" target="_blank">FILE 06 – ARCHIVE INTEGRITY AUDIT</a></li>
    <li style="margin-left: 75px;"><a href="file-07.html" target="_blank">FILE 07 – RECURSIVE EVENT MODEL</a></li>

</ul>

<script>
const downUntil = parseInt(localStorage.getItem("siteDownUntil") || "0", 10);

if (Date.now() < downUntil) {

    document.body.innerHTML = `
        <div style="display:flex;align-items:center;justify-content:center;height:100vh;text-align:center;">
            <div>
                <div style="color:#ff4444;letter-spacing:2px;margin-bottom:12px;">
                    ARCHIVE UNAVAILABLE
                </div>
                <div style="color:#9a9a9a;margin-bottom:8px;">
                    Containment directive active.
                </div>
                <div id="countdown" style="color:#e0e0e0;"></div>
            </div>
        </div>
    `;

    const countdownEl = document.getElementById("countdown");

    function updateCountdown() {
        const remaining = downUntil - Date.now();
        if (remaining <= 0) {
            localStorage.removeItem("siteDownUntil");
            location.reload();
            return;
        }

        const minutes = Math.floor(remaining / 60000);
        const seconds = Math.floor((remaining % 60000) / 1000);

        countdownEl.textContent =
            "Resuming in " +
            String(minutes).padStart(2, "0") + ":" +
            String(seconds).padStart(2, "0");
    }

    updateCountdown();
    setInterval(updateCountdown, 1000);

    throw new Error("Archive locked.");
}

    /* File 07 reaction */
if (localStorage.getItem("reviewedFile07") === "true") {

    document.title = "14:07";

    // Freeze timestamp
    const ts = document.getElementById("timestamp");
    if (ts) {
        ts.textContent = "Last Updated: 14:07";
    }

    // Slow upward drift
    let offset = 0;
    setInterval(() => {
        offset -= 0.2;
        document.body.style.transform = `translateY(${offset}px)`;
    }, 100);

    // Random redaction injection
    setInterval(() => {
        const elements = document.querySelectorAll("p, a");
        const random = elements[Math.floor(Math.random() * elements.length)];
        if (random && Math.random() < 0.2) {
            random.textContent = "████████";
        }
    }, 4000);
}


let intensity = 0.12;
let unstable = false;

/* File 04 reaction */
if (localStorage.getItem("reviewedFile04") === "true") {
    intensity = 0.35;
    document.getElementById("access").textContent = "ARCHIVE ACCESSED.";
}

/* File 06 reaction */
if (localStorage.getItem("reviewedFile06") === "true") {
    unstable = true;
    intensity = 0.6;

    document.getElementById("archiveTitle").textContent = "ARCHIVE STATE: UNSTABLE";
    document.getElementById("archiveTitle").classList.add("alert");

    document.getElementById("caseID").textContent = "CASE ID: 14:07";

    document.getElementById("page").classList.add("unstable");

    const now = new Date();
    document.getElementById("timestamp").textContent =
        "Last Updated: " + now.toLocaleTimeString("en-US", { hour12: false });

    const list = document.getElementById("fileList");
    const items = Array.from(list.children);
    items.reverse();
    list.innerHTML = "";
    items.forEach(item => list.appendChild(item));
}

/* Glitch distortion */
setInterval(() => {
    const access = document.getElementById("access");
    if (access && Math.random() < intensity) {
        access.style.letterSpacing = "3px";
        setTimeout(() => {
            access.style.letterSpacing = "normal";
        }, 120);
    }
}, 4000);

setInterval(() => {
    const ts = document.getElementById("timestamp");
    if (ts && Math.random() < intensity) {
        ts.textContent = "Last Updated: May 3, 2024 – 14:07:03";
        setTimeout(() => {
            ts.textContent = "Last Updated: May 3, 2024 – 14:07";
        }, 180);
    }
}, 5000);

</script>

</body>
</html>
